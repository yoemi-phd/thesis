\documentclass[letterpaper,oneside,final]{book}

\makeatletter
% \def\bstctlcite{%
% \@ifnextchar[{\@bstctlcite}{\@bstctlcite[@auxout]}}
\def\@bstctlcite[#1]#2{%
	\@bsphack%
	\@for\@citeb:=#2\do{%
	\edef\@citeb{\expandafter\@firstofone\@citeb}%
	\if@filesw\immediate%
	\write\csname #1\endcsname{\string\citation{\@citeb}}\fi}%
	\@esphack%
}
\makeatother

%% This command is used to control the language of the document.
\newcommand\Langue{french}            

\usepackage{ifthen}
%\usepackage[utf8]{inputenc}

%\usepackage[cyr]{aeguill}
\usepackage{lmodern}
\usepackage[T1]{fontenc}

%%
\ifthenelse{\equal{\Langue}{english}}{
	\usepackage[french,english]{babel}
}{
	\usepackage[english,french]{babel} 
}


\usepackage{graphicx}
% \usepackage{epstopdf}

\graphicspath{{./images/}{./dia/}{./gnuplot/}}

\input{00-prelude.tex}

%%
%% Définitions spécifiques au format de rédaction de Poly.
%% Here we define the Poly formatting.
\RequirePackage[\Langue]{thesispoly}

\input{00-author}

\ifthenelse{\equal{\monDiplome}{M}}{
\newcommand\monSujet{Mémoire de maîtrise}
\newcommand\monDipl{Maîtrise ès sciences appliquées}
}{
\newcommand\monSujet{Thèse de doctorat}
\newcommand\monDipl{Philosophi\ae{} Doctor}
}

%%
%% Informations qui sont stockées dans un fichier PDF.
%% Information that is stored in a PDF file.
\hypersetup{
  pdftitle={\monTitre},
  pdfsubject={\monSujet},
  pdfauthor={\monPrenom{} \monNom},
  pdfkeywords={\mesMotsClef},
  bookmarksnumbered,
  pdfstartview={FitV},
  hidelinks,
  linktoc=all
}

\usepackage[titles]{tocloft}

\renewcommand\cftchapleader{\cftdotfill{\cftsecdotsep}}
\renewcommand\cfttabindent{0pt}
\renewcommand\cfttabnumwidth{7em}
\renewcommand\cfttabpresnum{\tablename\ }
\renewcommand\cftfigindent{0pt} 
\renewcommand\cftfignumwidth{7em}
\renewcommand\cftfigpresnum{\figurename\ }

\ifthenelse{\equal{\Langue}{english}}{
	\renewcommand\cftchapfont{CHAPTER }
    \renewcommand\cftchappagefont{}
}{
	\renewcommand\cftchapfont{CHAPITRE }
    \renewcommand\cftchappagefont{}
}

\begin{document}
% \bstctlcite{IEEEexample:BSTcontrol}

\frontmatter
\ifthenelse{\equal{\PageGarde}{O}}{\addtocounter{page}{1}}{}
\thispagestyle{empty}%
\begin{center}%
\vspace*{\stretch{0.1}}
\textbf{POLYTECHNIQUE MONTRÉAL}\\
affiliée à l'Université de Montréal\\
\vspace*{\stretch{1}}
\textbf{\monTitre}\\
\vspace*{\stretch{1}}
\textbf{\MakeUppercase{\monPrenom~\monNom}}\\
Département de~{\monDepartement}\\
\vspace*{\stretch{1}}
\ifthenelse{\equal{\monDiplome}{M}}{Mémoire présenté}{Thèse présentée} en vue de l'obtention du diplôme de~\emph{\monDipl}\\
\maDiscipline\\
\vskip 0.4in
\moisDepot~\anneeDepot%
\end{center}%
\vspace*{\stretch{1}}
\copyright~\monPrenom~\monNom, \anneeDepot.
\newpage\thispagestyle{empty}%
\begin{center}%

\vspace*{\stretch{0.1}}
\textbf{POLYTECHNIQUE MONTRÉAL}\\
affiliée à l'Université de Montréal\\
\vspace*{\stretch{2}}
Ce\ifthenelse{\equal{\monDiplome}{M}}{~mémoire intitulé}{tte thèse intitulée}:\\
\vspace*{\stretch{1}}
\textbf{\monTitre}\\
\vspace*{\stretch{1}}
présenté\ifthenelse{\equal{\monDiplome}{M}}{}{e}
par~\textbf{\mbox{\monPrenom~\MakeUppercase{\monNom}}}\\
en vue de l'obtention du diplôme de~\emph{\mbox{\monDipl}}\\
a été dûment accepté\ifthenelse{\equal{\monDiplome}{M}}{}{e} par le jury d'examen constitué de:
\end{center}
\vspace*{\stretch{2}}
\monJury%
%%
\pagestyle{pagenumber}%
\include{01-dedicace}
\include{02-acknowledgements}
\include{03-abstract-fr}
\include{03-abstract-en}

{\setlength{\parskip}{0pt}%

\ifthenelse{\equal{\Langue}{english}}{%
\renewcommand\contentsname{TABLE OF CONTENTS}%
}{%
\renewcommand\contentsname{TABLE DES MATIÈRES}%
}
\tableofcontents

\ifthenelse{\equal{\Langue}{english}}{%
\renewcommand\listtablename{LIST OF TABLES}%
}{%
\renewcommand\listtablename{LISTE DES TABLEAUX}%
}
\listoftables

\ifthenelse{\equal{\Langue}{english}}{%
\renewcommand\listfigurename{LIST OF FIGURES}%
}{
\renewcommand\listfigurename{LISTE DES FIGURES}%
}
\listoffigures
}

\include{04-acronyms}
\ifthenelse{\equal{\AnnexesPresentes}{O}}{\listofappendices}{}
\mainmatter%

\include{05-introduction}
\include{06-litterature-review}
\include{07-01-theme}
\include{07-02-theme}
\include{07-03-theme}
\include{08-conclusion}

\ifthenelse{\equal{\Langue}{english}}{%
\renewcommand\bibname{REFERENCES}
\bibliography{thesis}
\bibliographystyle{IEEEtran}
}{%
\renewcommand\bibname{RÉFÉRENCES}
\bibliography{thesis}
\bibliographystyle{IEEEtran-francais}
}
%
\ifthenelse{\equal{\AnnexesPresentes}{O}}{
\appendix%
\newcommand{\Annexe}[1]{\annexe{#1}\setcounter{figure}{0}%
\setcounter{table}{0}\setcounter{footnote}{0}}%
\include{09-appendix}
}{}
\end{document}
